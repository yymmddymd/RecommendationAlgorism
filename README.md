# 1. 採用したレコメンデーションアルゴリズムと理由

## 1.1 映画が選択された場合の処理

アルゴリズム: アイテムベース協調フィルタリング
理由: ユーザーが「好き」として選択した映画と類似度の高い他の映画を推薦するため。`app.py`では、全ユーザーの評価情報に基づき、コサイン類似度を使用して映画間の類似度行列（`item_similarity_df`）を事前に計算し、推薦に利用している。

## 1.2 映画が未選択の場合の処理

アルゴリズム: 人気度ベース
理由: ユーザーの嗜好情報（選択された映画）がない場合、パーソナライズされた推薦ができないため、全ユーザーの評価の平均値が高い映画を人気映画として上位5件を推薦する。

# 2. ロジック解説: おすすめ映画取得までの流れ

## 2.1 処理の流れ（ボタン押下〜表示）

1. POSTリクエスト: ユーザーが映画を選択しフォームを送信すると、`/recommend`エンドポイント（`recommend()`関数）にPOSTリクエストが送られる。
2. 選択映画の取得: フォームデータから選択された映画のタイトルリスト（`selected_movies`）を取得する。
3. 推薦コアロジック実行: 取得したタイトルリストを引数に`get_recommendations()`関数が呼び出される。
4. 結果の表示: スコアの高い上位5件の映画タイトルが取得され、`recommendations.html`テンプレートを通じてユーザーに表示される。

## 2.2 重要なポイント：複数の映画情報の扱い

選択された映画の情報は、推薦スコアを計算するために以下のように扱われる。

* 推薦スコアを保持する`total_scores`というSeriesを初期化する。
* 選択された映画のタイトルごとに、対応する映画IDを取得し、そのIDに対応する**類似度行列の行**（その映画と他の全映画の類似度）を`total_scores`に加算する。
* これにより、複数の選択された映画それぞれからの類似度スコアが合算され、総合的な推薦スコアが算出される。（より多くの選択映画に類似している映画を高く評価するため）
* スコア計算後、選択された映画自体が推薦リストに入らないよう、それらの映画のスコアは`-1.0`に設定され除外される。

# 3. Webサイトを動作させるために必要な起動手順、必要なインストール作業。
```bash
pip install pandas scikit-learn Flask scipy